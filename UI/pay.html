<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>CINEXPO — Métodos de Pago</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    body { font-family: "Inter", sans-serif; background:#0b0f13; color:#fff; }
    .touch-large { padding: .9rem 1rem; border-radius: .75rem; font-size: 1.05rem; }
  </style>
</head>
<body class="min-h-screen">

  <!-- APP BAR -->
  <header class="w-full fixed top-0 left-0 bg-gray-900 border-b border-gray-700 z-50 px-4 py-3 flex items-center justify-between">
    <div class="flex items-center gap-3">
      <a href="index.html" aria-label="Volver" class="text-gray-300 hover:text-white">←</a>
      <h1 class="text-lg font-semibold">Métodos de Pago</h1>
    </div>
    <div class="text-sm text-gray-400">CINEXPO</div>
  </header>

  <!-- CONTENIDO PRINCIPAL -->
  <main class="pt-20 px-4 pb-8 max-w-md mx-auto">

    <p class="text-gray-400 text-center mb-4">Elige el método de pago para completar tu compra</p>

    <div class="flex flex-col gap-3">

      <!-- BOTÓN Pago Móvil -->
      <!-- ID = btn-pago-movil -->
      <!-- Comentario: Al pulsar debe mostrar el formulario/confirmación de Pago Móvil (si se desea); aquí mostramos los datos y QR debajo. -->
      <button id="btn-pago-movil" class="w-full border border-yellow-400 text-yellow-400 hover:bg-yellow-400 hover:text-black py-3 rounded-xl text-lg font-semibold transition touch-large">
        Pago Móvil
      </button>

      <!-- TARJETA CON DATOS BANCARIOS Y QR (visible siempre debajo del botón Pago Móvil) -->
      <div id="pago-movil-data" class="mt-2 bg-[#0f1720] border border-gray-800 rounded-xl p-4 text-sm">
        <!-- NOTA PARA EL DEV: reemplazar los datos de ejemplo por los reales. -->
        <!-- ESTRUCTURA: Pago Móvil = Cédula/RIF, Teléfono, Banco. Debajo iría el QR dinámico. -->

        <h3 class="text-base font-semibold text-yellow-300 mb-2">Instrucciones Pago Móvil (ejemplo)</h3>

        <!-- DATOS (REEMPLAZAR) -->
        <div class="mb-3">
          <!-- EJEMPLO: mostrar los campos que el usuario debe usar para hacer la transferencia -->
          <p class="text-gray-300"><strong>Cédula / RIF:</strong> <span id="pm-cedula">V-12.345.678</span></p>
          <p class="text-gray-300"><strong>Teléfono (Destino):</strong> <span id="pm-telefono">+58 412-1234567</span></p>
          <p class="text-gray-300"><strong>Banco:</strong> <span id="pm-banco">Banco Ejemplo</span></p>
          <p class="text-gray-400 text-xs mt-2">*Reemplazar los valores de arriba por los datos reales del beneficiario antes de producción.</p>
        </div>

        <!-- CÓDIGO QR (REFERENCIAL) -->
        <div class="flex items-center gap-4">
          <!-- NOTA: reemplazar el src por la imagen QR real (PNG/JPEG) o por un <canvas> generado dinámicamente -->
          <!-- Aquí usamos un SVG embebido simple como placeholder para un código QR referencial -->
          <div class="w-28 h-28 bg-white rounded-md flex items-center justify-center overflow-hidden">
            <!-- SVG QR referencial -->
            <img id="pm-qr" alt="QR Pago Móvil (referencial)"
                 src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 120 120"><rect width="120" height="120" fill="%23000"/><rect x="10" y="10" width="30" height="30" fill="%23fff"/><rect x="80" y="10" width="30" height="30" fill="%23fff"/><rect x="10" y="80" width="30" height="30" fill="%23fff"/><rect x="40" y="40" width="10" height="10" fill="%23fff"/><rect x="60" y="40" width="10" height="10" fill="%23fff"/><rect x="40" y="60" width="10" height="10" fill="%23fff"/><rect x="60" y="60" width="10" height="10" fill="%23fff"/></svg>'>
          </div>

          <div class="flex-1">
            <p class="text-gray-300">Escanea este código QR para pagar directamente desde tu app bancaria o monedero móvil.</p>
            <p class="text-gray-400 text-xs mt-2">Comentario para desarrolladores: reemplazar el atributo <code>src</code> del &lt;img id="pm-qr"&gt; por la URL del QR real o por un data URI del QR generado por el backend.</p>
          </div>
        </div>

      </div>

      <!-- BOTÓN Cash -->
      <!-- ID = btn-cash -->
      <!-- Comentario: Al pulsar debe registrar la orden como 'Pago en efectivo' o abrir instrucciones para pago en taquilla. -->
      <button id="btn-cash" class="w-full border border-green-400 text-green-400 hover:bg-green-400 hover:text-black py-3 rounded-xl text-lg font-semibold transition touch-large">
        Cash
      </button>

      <!-- BOTÓN CONFIRMAR (opcional) -->
      <button id="btn-confirm-pay" class="w-full bg-blue-600 hover:bg-blue-500 text-white py-3 rounded-xl text-lg font-semibold transition touch-large">
        Confirmar método y continuar
      </button>

      <!-- NOTAS / AYUDA -->
      <p class="text-xs text-gray-400 mt-3">Al confirmar, el backend debe validar la orden (asientos, precio) y registrar el método de pago seleccionado. Asegurarse de generar un recibo o código de orden.</p>

    </div>

  </main>

  <!-- SCRIPTS: comentarios e stubs para integración -->
  <script>
    /* IDs importantes para que los desarrolladores integren la lógica:
       - btn-pago-movil: pulsar para iniciar flujo de Pago Móvil (si desean abrir formulario o destacar la tarjeta)
       - pago-movil-data: contenedor donde están los datos y el QR (reemplazar valores y QR aquí)
         -> campos con IDs: pm-cedula, pm-telefono, pm-banco, pm-qr
       - btn-cash: pulsar para marcar la orden como 'Pago en efectivo' o mostrar instrucciones de taquilla
       - btn-confirm-pay: confirmar método y llamar a la API para crear/actualizar la orden
    */

    // Elementos
    const btnPagoMovil = document.getElementById('btn-pago-movil');
    const btnCash = document.getElementById('btn-cash');
    const btnConfirm = document.getElementById('btn-confirm-pay');

    // Ejemplos de handlers (stubs) — reemplazar con fetch al backend
    btnPagoMovil?.addEventListener('click', () => {
      // Sugerencia: resaltar el contenedor de datos o abrir modal con instrucciones
      document.getElementById('pago-movil-data')?.scrollIntoView({ behavior: 'smooth', block: 'center' });
      console.log('Pago Móvil seleccionado. Mostrar/usar los datos debajo para realizar la transferencia o escanear el QR.');
    });

    btnCash?.addEventListener('click', () => {
      // TODO: Registrar en el frontend que el usuario eligió 'Cash' y guiarlo a la taquilla o emitir comprobante a recoger.
      console.log('Cash seleccionado. Registrar orden como pago en efectivo o mostrar instrucciones de taquilla.');
    });

    btnConfirm?.addEventListener('click', () => {
      // TODO: Llamar al endpoint que crea la orden y especifica el método de pago seleccionado.
      // Ejemplo pseudo:
      /*
      fetch('/api/orders', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ seats: [...], paymentMethod: selectedMethod })
      }).then(...)
      */
      alert('Simulación: método confirmado. Conectar con backend para crear la orden y procesar el pago.');
    });

    // Ejemplo: función para actualizar los datos del Pago Móvil desde el backend
    function setPagoMovilData({ cedula, telefono, banco, qrDataUrl }) {
      // Reemplaza los valores mostrados por los datos reales
      document.getElementById('pm-cedula').textContent = cedula || '—';
      document.getElementById('pm-telefono').textContent = telefono || '—';
      document.getElementById('pm-banco').textContent = banco || '—';
      if (qrDataUrl) {
        document.getElementById('pm-qr').src = qrDataUrl;
      }
    }

    // EJEMPLO: el equipo puede llamar a setPagoMovilData con la info que venga del backend:
    // setPagoMovilData({ cedula: 'J-12345678-9', telefono: '+58 412-0000000', banco: 'Banco Real', qrDataUrl: 'https://.../qr.png' });

  </script>

</body>
</html>
